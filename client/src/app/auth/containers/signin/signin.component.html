<div class="feature-container">
  <app-header
    title="Profile"
    subtitle="Your personal information and other cool stuff"
  ></app-header>

  <app-mulpericard *ngIf="!(authenticated$ | async); else authenticated">
    <app-mulpericard-subtitle *ngIf="(error$ | async) as error">
      <p class="warn">{{ error }}</p>
    </app-mulpericard-subtitle>
    <app-mulpericard-body>
      <p>Please sign in to use the editor.</p>
      <table>
        <tr>
          <td><label for="username">Email</label></td>
          <td>
            <input type="text" name="username" id="username" #usernameField />
          </td>
        </tr>
        <tr>
          <td><label for="password">Password</label></td>
          <td>
            <input
              type="password"
              name="password"
              id="password"
              #passwordField
            />
          </td>
        </tr>
      </table>
    </app-mulpericard-body>
    <app-mulpericard-actions>
      <button
        *ngIf="!(authenticating$ | async); else authenticating"
        class="primary btn-medium"
        (click)="onClickSignIn(usernameField.value, passwordField.value)"
      >
        Sign in
      </button>
      <ng-template #authenticating> <app-spinner></app-spinner> </ng-template>
    </app-mulpericard-actions>
  </app-mulpericard>

  <ng-template #authenticated>
    <app-mulpericard>
      <app-mulpericard-title>
        <div class="flex justify-space-between align-center">
          <div>Authenticated</div>
          <div><i class="material-icons">check_circle</i></div>
        </div>
        <!-->i class="material-icons">check_circle</i-->
      </app-mulpericard-title>
      <app-mulpericard-body>
        <p>You are succesfully authenticated, {{ username$ | async }}.</p>
      </app-mulpericard-body>
      <app-mulpericard-actions>
        <button class="warn btn-medium" (click)="onClickSignOut()">
          Sign out
        </button>
      </app-mulpericard-actions>
    </app-mulpericard>
  </ng-template>
</div>
